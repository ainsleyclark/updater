(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b679c240"],{"1ac4":function(s,t,r){},"349a":function(s,t,r){"use strict";var e=function(){var s=this,t=s.$createElement,r=s._self._c||t;return r("figure",{staticClass:"image"},[s._t("default"),r("div",{staticClass:"image-buttons"},[r("i",{staticClass:"feather feather-edit image-buttons-choose",on:{click:function(t){return s.$emit("choose",!0)}}}),r("i",{staticClass:"feather feather-trash image-buttons-remove",on:{click:function(t){return s.$emit("remove",!0)}}})])],2)},a=[],o={name:"ImageWithActions"},i=o,n=(r("75e3"),r("2877")),d=Object(n["a"])(i,e,a,!1,null,"542b6712",null);t["a"]=d.exports},"488c":function(s,t,r){"use strict";r.r(t);var e=function(){var s=this,t=s.$createElement,r=s._self._c||t;return r("section",[r("div",{staticClass:"auth-container"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-12"},[r("header",{staticClass:"header header-with-actions header-margin-large"},[r("div",{staticClass:"header-title"},[s.isSelf?r("h1",[s._v("Edit profile")]):r("h1",[s._v("Edit User "+s._s(s.data["first_name"])+" "+s._s(s.data["last_name"]))]),r("Breadcrumbs")],1),r("div",{staticClass:"header-actions"},[r("button",{staticClass:"btn btn-orange",class:{"btn-loading":s.isSavingUser},on:{click:function(t){return t.preventDefault(),s.save(t)}}},[s._v(" Update "),r("span",{staticClass:"btn-hide-text-mob"},[s._v("Profile")])])])])])]),s.doingAxios?r("div",{staticClass:"media-spinner spinner-container"},[r("div",{staticClass:"spinner spinner-large spinner-grey"})]):r("form",{staticClass:"form"},[r("div",{staticClass:"form-row-group"},[s._m(0),r("div",{staticClass:"row form-row form-row-border form-row-border-top"},[s._m(1),r("div",{staticClass:"col-12 col-desk-8 col-hd-6"},[r("FormGroup",{staticClass:"form-group-no-margin",attrs:{error:s.errors["first_name"]}},[r("input",{directives:[{name:"model",rawName:"v-model",value:s.data["first_name"],expression:"data['first_name']"}],staticClass:"form-input form-input-white",attrs:{type:"text"},domProps:{value:s.data["first_name"]},on:{input:function(t){t.target.composing||s.$set(s.data,"first_name",t.target.value)}}})])],1)]),r("div",{staticClass:"row form-row form-row-border"},[s._m(2),r("div",{staticClass:"col-12 col-desk-8 col-hd-6"},[r("FormGroup",{staticClass:"form-group-no-margin",attrs:{error:s.errors["last_name"]}},[r("input",{directives:[{name:"model",rawName:"v-model",value:s.data["last_name"],expression:"data['last_name']"}],staticClass:"form-input form-input-white",attrs:{type:"text"},domProps:{value:s.data["last_name"]},on:{input:function(t){t.target.composing||s.$set(s.data,"last_name",t.target.value)}}})])],1)])]),r("div",{staticClass:"form-row-group"},[s._m(3),r("div",{staticClass:"row form-row form-row-border form-row-border-top"},[s._m(4),r("div",{staticClass:"col-12 col-desk-8 col-hd-6"},[r("FormGroup",{staticClass:"form-group-no-margin",attrs:{error:s.errors["email"]}},[r("input",{directives:[{name:"model",rawName:"v-model",value:s.data["email"],expression:"data['email']"}],staticClass:"form-input form-input-white",attrs:{type:"text"},domProps:{value:s.data["email"]},on:{input:function(t){t.target.composing||s.$set(s.data,"email",t.target.value)}}})])],1)]),r("div",{staticClass:"row form-row form-row-border"},[s._m(5),r("div",{staticClass:"col-12 col-desk-8 col-hd-6"},[r("FormGroup",{staticClass:"form-group-no-margin",attrs:{error:s.errors["website"]}},[r("input",{directives:[{name:"model",rawName:"v-model",value:s.data["website"],expression:"data['website']"}],staticClass:"form-input form-input-white",attrs:{type:"text"},domProps:{value:s.data["website"]},on:{input:function(t){t.target.composing||s.$set(s.data,"website",t.target.value)}}})])],1)]),r("div",{staticClass:"row form-row form-row-border"},[s._m(6),r("div",{staticClass:"col-12 col-desk-8 col-hd-6"},[r("FormGroup",{staticClass:"form-group-no-margin",attrs:{error:s.errors["facebook"]}},[r("input",{directives:[{name:"model",rawName:"v-model",value:s.data["facebook"],expression:"data['facebook']"}],staticClass:"form-input form-input-white",attrs:{type:"text"},domProps:{value:s.data["facebook"]},on:{input:function(t){t.target.composing||s.$set(s.data,"facebook",t.target.value)}}})])],1)]),r("div",{staticClass:"row form-row form-row-border"},[s._m(7),r("div",{staticClass:"col-12 col-desk-8 col-hd-6"},[r("FormGroup",{staticClass:"form-group-no-margin",attrs:{error:s.errors["twitter"]}},[r("input",{directives:[{name:"model",rawName:"v-model",value:s.data["twitter"],expression:"data['twitter']"}],staticClass:"form-input form-input-white",attrs:{type:"text"},domProps:{value:s.data["twitter"]},on:{input:function(t){t.target.composing||s.$set(s.data,"twitter",t.target.value)}}})])],1)]),r("div",{staticClass:"row form-row form-row-border"},[s._m(8),r("div",{staticClass:"col-12 col-desk-8 col-hd-6"},[r("FormGroup",{staticClass:"form-group-no-margin",attrs:{error:s.errors["linked_in"]}},[r("input",{directives:[{name:"model",rawName:"v-model",value:s.data["linked_in"],expression:"data['linked_in']"}],staticClass:"form-input form-input-white",attrs:{type:"text"},domProps:{value:s.data["linked_in"]},on:{input:function(t){t.target.composing||s.$set(s.data,"linked_in",t.target.value)}}})])],1)]),r("div",{staticClass:"row form-row form-row-border"},[s._m(9),r("div",{staticClass:"col-12 col-desk-8 col-hd-6"},[r("FormGroup",{staticClass:"form-group-no-margin",attrs:{error:s.errors["instagram"]}},[r("input",{directives:[{name:"model",rawName:"v-model",value:s.data["instagram"],expression:"data['instagram']"}],staticClass:"form-input form-input-white",attrs:{type:"text"},domProps:{value:s.data["instagram"]},on:{input:function(t){t.target.composing||s.$set(s.data,"instagram",t.target.value)}}})])],1)]),r("div",{staticClass:"row form-row form-row-border"},[s._m(10),r("div",{staticClass:"col-12 col-desk-8 col-hd-6"},[r("FormGroup",{staticClass:"form-group-no-margin",attrs:{error:s.errors["biography"]}},[r("textarea",{directives:[{name:"model",rawName:"v-model",value:s.data["biography"],expression:"data['biography']"}],staticClass:"form-input form-input-white",attrs:{rows:"8",type:"text"},domProps:{value:s.data["biography"]},on:{input:function(t){t.target.composing||s.$set(s.data,"biography",t.target.value)}}})])],1)])]),r("div",{staticClass:"form-row-group"},[s._m(11),r("div",{staticClass:"row form-row form-row-border form-row-border-top"},[s._m(12),r("div",{staticClass:"col-12 col-desk-8 col-hd-6"},[s.profilePicture?r("div",[r("ImageWithActions",{on:{choose:function(t){s.showImageModal=!0},remove:s.removeProfilePicture}},[r("img",{attrs:{src:s.getSiteUrl+s.profilePicture["url"]}})])],1):r("div",[r("button",{staticClass:"btn",on:{click:function(t){t.preventDefault(),s.showImageModal=!0}}},[s._v("Add photo")])])])])]),s.isSelf?r("div",{staticClass:"form-row-group profile-last-row"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-12"},[r("div",{staticClass:"profile-reset-password"},[r("h2",[s._v("Reset password")]),r("div",[r("button",{staticClass:"btn btn-orange",class:{"btn-loading":s.isSavingPassword},on:{click:function(t){return t.preventDefault(),s.resetPassword(t)}}},[s._v("Reset")])])])])]),r("div",{staticClass:"row form-row form-row-border"},[s._m(13),r("div",{staticClass:"col-12 col-desk-8 col-hd-6"},[r("FormGroup",{staticClass:"form-group-no-margin",attrs:{error:s.errors["current_password"]}},[r("input",{directives:[{name:"model",rawName:"v-model",value:s.password["current_password"],expression:"password['current_password']"}],staticClass:"form-input form-input-white",attrs:{type:"password",placeholder:"Current password"},domProps:{value:s.password["current_password"]},on:{input:function(t){t.target.composing||s.$set(s.password,"current_password",t.target.value)}}})])],1)]),r("div",{staticClass:"row form-row form-row-border"},[r("div",{staticClass:"col-12 col-desk-4 col-hd-3"},[r("h4",[s._v("Password")]),r("p",[s._v("Enter a new password, a minimum of 8 alphanumeric characters are required.")]),r("button",{staticClass:"btn profile-generate-pass",on:{click:function(t){return t.preventDefault(),s.generatePassword(t)}}},[s._v("Generate password")])]),r("div",{staticClass:"col-12 col-desk-8 col-hd-6"},[r("FormGroup",{staticClass:"form-group-no-margin",attrs:{error:s.errors["new_password"]}},["checkbox"===(s.isGeneratedPassword?"text":"password")?r("input",{directives:[{name:"model",rawName:"v-model",value:s.password["new_password"],expression:"password['new_password']"}],staticClass:"form-input form-input-white",attrs:{placeholder:"New password",type:"checkbox"},domProps:{checked:Array.isArray(s.password["new_password"])?s._i(s.password["new_password"],null)>-1:s.password["new_password"]},on:{change:function(t){var r=s.password["new_password"],e=t.target,a=!!e.checked;if(Array.isArray(r)){var o=null,i=s._i(r,o);e.checked?i<0&&s.$set(s.password,"new_password",r.concat([o])):i>-1&&s.$set(s.password,"new_password",r.slice(0,i).concat(r.slice(i+1)))}else s.$set(s.password,"new_password",a)}}}):"radio"===(s.isGeneratedPassword?"text":"password")?r("input",{directives:[{name:"model",rawName:"v-model",value:s.password["new_password"],expression:"password['new_password']"}],staticClass:"form-input form-input-white",attrs:{placeholder:"New password",type:"radio"},domProps:{checked:s._q(s.password["new_password"],null)},on:{change:function(t){return s.$set(s.password,"new_password",null)}}}):r("input",{directives:[{name:"model",rawName:"v-model",value:s.password["new_password"],expression:"password['new_password']"}],staticClass:"form-input form-input-white",attrs:{placeholder:"New password",type:s.isGeneratedPassword?"text":"password"},domProps:{value:s.password["new_password"]},on:{input:function(t){t.target.composing||s.$set(s.password,"new_password",t.target.value)}}})])],1)]),r("div",{staticClass:"row form-row form-row-border"},[s._m(14),r("div",{staticClass:"col-12 col-desk-8 col-hd-6"},[r("FormGroup",{staticClass:"form-group-no-margin",attrs:{error:s.errors["confirm_password"]}},["checkbox"===(s.isGeneratedPassword?"text":"password")?r("input",{directives:[{name:"model",rawName:"v-model",value:s.password["confirm_password"],expression:"password['confirm_password']"}],staticClass:"form-input form-input-white form-input-test",attrs:{placeholder:"Confirm password",type:"checkbox"},domProps:{checked:Array.isArray(s.password["confirm_password"])?s._i(s.password["confirm_password"],null)>-1:s.password["confirm_password"]},on:{change:function(t){var r=s.password["confirm_password"],e=t.target,a=!!e.checked;if(Array.isArray(r)){var o=null,i=s._i(r,o);e.checked?i<0&&s.$set(s.password,"confirm_password",r.concat([o])):i>-1&&s.$set(s.password,"confirm_password",r.slice(0,i).concat(r.slice(i+1)))}else s.$set(s.password,"confirm_password",a)}}}):"radio"===(s.isGeneratedPassword?"text":"password")?r("input",{directives:[{name:"model",rawName:"v-model",value:s.password["confirm_password"],expression:"password['confirm_password']"}],staticClass:"form-input form-input-white form-input-test",attrs:{placeholder:"Confirm password",type:"radio"},domProps:{checked:s._q(s.password["confirm_password"],null)},on:{change:function(t){return s.$set(s.password,"confirm_password",null)}}}):r("input",{directives:[{name:"model",rawName:"v-model",value:s.password["confirm_password"],expression:"password['confirm_password']"}],staticClass:"form-input form-input-white form-input-test",attrs:{placeholder:"Confirm password",type:s.isGeneratedPassword?"text":"password"},domProps:{value:s.password["confirm_password"]},on:{input:function(t){t.target.composing||s.$set(s.password,"confirm_password",t.target.value)}}})])],1)])]):s._e()])]),r("Modal",{staticClass:"modal-full-width modal-hide-close",attrs:{show:s.showImageModal},on:{"update:show":function(t){s.showImageModal=t}}},[r("template",{slot:"text"},[r("Uploader",{staticClass:"media-modal",attrs:{rows:3,modal:!0,filters:!1,options:!1},on:{insert:s.insertProfilePicture}},[r("template",{slot:"close"},[r("button",{staticClass:"btn btn-margin-right btn-icon-mob",on:{click:function(t){t.preventDefault(),s.showImageModal=!1}}},[r("i",{staticClass:"feather feather-x"}),r("span",[s._v("Close")])])])],2)],1)],2)],1)},a=[function(){var s=this,t=s.$createElement,r=s._self._c||t;return r("div",{staticClass:"row"},[r("div",{staticClass:"col-12"},[r("h2",[s._v("Basic options")])])])},function(){var s=this,t=s.$createElement,r=s._self._c||t;return r("div",{staticClass:"col-12 col-desk-4 col-hd-3"},[r("h4",[s._v("First name*")])])},function(){var s=this,t=s.$createElement,r=s._self._c||t;return r("div",{staticClass:"col-12 col-desk-4 col-hd-3"},[r("h4",[s._v("Last name*")])])},function(){var s=this,t=s.$createElement,r=s._self._c||t;return r("div",{staticClass:"row"},[r("div",{staticClass:"col-12"},[r("h2",[s._v("Contact Info")])])])},function(){var s=this,t=s.$createElement,r=s._self._c||t;return r("div",{staticClass:"col-12 col-desk-4 col-hd-3"},[r("h4",[s._v("Email address*")]),r("p",[s._v("Enter a valid email address, this will be used for signing in to Verbis.")])])},function(){var s=this,t=s.$createElement,r=s._self._c||t;return r("div",{staticClass:"col-12 col-desk-4 col-hd-3"},[r("h4",[s._v("Website")])])},function(){var s=this,t=s.$createElement,r=s._self._c||t;return r("div",{staticClass:"col-12 col-desk-4 col-hd-3"},[r("h4",[s._v("Facebook")])])},function(){var s=this,t=s.$createElement,r=s._self._c||t;return r("div",{staticClass:"col-12 col-desk-4 col-hd-3"},[r("h4",[s._v("Twitter")])])},function(){var s=this,t=s.$createElement,r=s._self._c||t;return r("div",{staticClass:"col-12 col-desk-4 col-hd-3"},[r("h4",[s._v("LinkedIn")])])},function(){var s=this,t=s.$createElement,r=s._self._c||t;return r("div",{staticClass:"col-12 col-desk-4 col-hd-3"},[r("h4",[s._v("Instagram")])])},function(){var s=this,t=s.$createElement,r=s._self._c||t;return r("div",{staticClass:"col-12 col-desk-4 col-hd-3"},[r("h4",[s._v("Bio")])])},function(){var s=this,t=s.$createElement,r=s._self._c||t;return r("div",{staticClass:"row"},[r("div",{staticClass:"col-12"},[r("h2",[s._v("Profile")])])])},function(){var s=this,t=s.$createElement,r=s._self._c||t;return r("div",{staticClass:"col-12 col-desk-4 col-hd-3"},[r("h4",[s._v("Profile picture")])])},function(){var s=this,t=s.$createElement,r=s._self._c||t;return r("div",{staticClass:"col-12 col-desk-4 col-hd-3"},[r("h4",[s._v("Current password")]),r("p",[s._v("Type in your current password.")])])},function(){var s=this,t=s.$createElement,r=s._self._c||t;return r("div",{staticClass:"col-12 col-desk-4 col-hd-3"},[r("h4",[s._v("Confirm Password")]),r("p",[s._v("Enter the same password in again.")])])}],o=(r("7db0"),r("4160"),r("d3b7"),r("3ca3"),r("159b"),r("ddb0"),r("96cf"),r("1da1")),i=r("90f8"),n=r("9556"),d=r("fb0b"),c=r("349a"),l=r("87f5"),u=r("d7f8"),p={name:"Home",title:"Profile",mixins:[l["a"]],components:{FormGroup:u["a"],ImageWithActions:c["a"],Uploader:d["a"],Modal:n["a"],Breadcrumbs:i["a"]},data:function(){return{doingAxios:!0,data:{website:""},password:{id:!1,current_password:"",new_password:"",confirm_password:""},media:[],errors:[],isSelf:!1,showImageModal:!1,profilePicture:!1,timeout:null,isSavingUser:!1,isSavingPassword:!1,isGeneratedPassword:!1}},mounted:function(){this.init()},watch:{"$route.params.id":function(){this.init()}},methods:{init:function(){var s=this;this.userId=this.$route.params.id,parseFloat(this.userId)===this.getUserInfo.id&&this.$router.push({name:"not-found"}),this.userId||(this.data=this.getUserInfo,this.userId=this.data.id,this.isSelf=!0,this.doingAxios=!1),Promise.all([this.getMedia(),this.getUser()]).then((function(){return s.getProfilePicture()}))},save:function(){var s=this;this.isSavingUser=!0,this.errors.length?this.$noty.error("Fix the errors before saving your profile."):(this.data["password"]=this.newPassword,this.profilePicture&&(this.data["profile_picture_id"]=this.profilePicture.id),this.$delete(this.data,"confirm_password"),this.axios.put("/users/"+this.userId,this.data).then((function(t){s.errors=[];var r=s.isSelf?"Profile updated successfully.":"User updated successfully.";s.$noty.success(r),s.isSelf&&s.$store.commit("setUser",t.data.data)})).catch((function(t){if(400!==t.response.status)s.helpers.handleResponse(t);else{s.validate(t.response.data.data.errors);var r=s.isSelf?"Fix the errors before saving your profile.":"User updated successfully.";s.$noty.error(r)}})).finally((function(){setTimeout((function(){s.isSavingUser=!1}),s.timeoutDelay)})))},resetPassword:function(){var s=this;this.isSavingPassword=!0,this.password.id=this.userId,this.axios.post("/users/"+this.userId+"/reset-password",this.password).then((function(){s.errors=[],s.password={},s.isGeneratedPassword=!1,s.$noty.success("Password updated successfully.")})).catch((function(t){if(s.helpers.checkServer(t),400===t.response.status)return s.validate(t.response.data.data.errors),void s.$noty.error("Fix the errors before resetting password.");s.helpers.handleResponse(t)})).finally((function(){setTimeout((function(){s.isSavingPassword=!0}),s.timeoutDelay)}))},sendResetPassword:function(){var s=this;this.axios.post("/password/email",{email:this.data.email}).then((function(s){console.log(s)})).catch((function(t){s.helpers.handleResponse(t)}))},getUser:function(){var s=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,s.axios.get("/users/"+s.userId).then((function(t){var r=t.data.data;s.helpers.isEmptyObject(r)&&s.$router.push({name:"not-found"}),s.data=r})).catch((function(t){s.helpers.handleResponse(t)})).finally((function(){s.doingAxios=!1}));case 2:case"end":return t.stop()}}),t)})))()},validate:function(s){var t=this;this.errors={},s.forEach((function(s){t.$set(t.errors,s.key,s.message)}))},insertProfilePicture:function(s){this.profilePicture=s,this.showImageModal=!1,this.isSelf&&this.$store.commit("setProfilePicture",s)},removeProfilePicture:function(){this.profilePicture=!1,this.$store.commit("setProfilePicture",!1)},getMedia:function(){var s=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,s.axios.get("/media?limit=all").then((function(t){s.media=t.data.data}));case 2:case"end":return t.stop()}}),t)})))()},getProfilePicture:function(){var s=this;this.profilePicture=this.media.find((function(t){return t.id===s.data["profile_picture_id"]}))},generatePassword:function(){var s=this.createPassword();this.password["new_password"]=s,this.password["confirm_password"]=s,this.isGeneratedPassword=!0}}},m=p,f=(r("5253"),r("2877")),w=Object(f["a"])(m,e,a,!1,null,"25458be4",null);t["default"]=w.exports},5253:function(s,t,r){"use strict";var e=r("1ac4"),a=r.n(e);a.a},"75e3":function(s,t,r){"use strict";var e=r("7c5e"),a=r.n(e);a.a},"7c5e":function(s,t,r){},"87f5":function(s,t,r){"use strict";r.d(t,"a",(function(){return e}));var e={methods:{createPassword:function(){for(var s="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789@:\\/@£$%=^&&*()_+?><",r=t.length,e=24,a=0;a<e;a++)s+=t.charAt(Math.floor(Math.random()*r));return s}}}},d7f8:function(s,t,r){"use strict";var e=function(){var s=this,t=s.$createElement,r=s._self._c||t;return r("div",{staticClass:"form-group",class:{"form-group-error":s.getError}},[r("label",{staticClass:"form-label"},[s._v(s._s(s.label))]),s._t("default"),r("transition",{attrs:{name:"trans-fade-height"}},[s.getError?r("span",{staticClass:"field-message field-message-warning"},[s._v(s._s(s.getError))]):s._e()])],2)},a=[],o={name:"FormGroup",props:{label:{type:String,default:""},error:{type:String,default:""}},data:function(){return{show:!0}},computed:{getError:function(){return""!==this.error&&this.error}}},i=o,n=r("2877"),d=Object(n["a"])(i,e,a,!1,null,"715e7f67",null);t["a"]=d.exports}}]);
//# sourceMappingURL=chunk-b679c240.39a28f58.js.map